{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"title": "South East Asia Life Expectancy (2015)",
	"width": 1000,
	"height": 400,
	"projection": {"type": "equalEarth"},
	"data": {
		"url": "data/asean.topojson",
		"format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
	},
	"params": [
		{
			"name": "param_year",
			"value": 2000,
			"bind": {
				"input": "range", "min": 2000, "max": 2015, "step": 1
			}
		}
	],
	"transform": [
		{
			"lookup": "properties.NAME",
			"from": {
				"data": {
					"url": "data/life_expectancy_ASEAN_cleaned.csv",
					"format": {
						"type": "csv",
						"parse": {
							"Year": "number",
							"Population": "number",
							"Measles": "number",
							"Polio": "number",
							"Total_expenditure": "number",
							"GDP": "number",
							"BMI": "number",
							"Schooling": "number",
							"Life expectancy": "number"
						}
					}
				},
				"key": "Country",
				"fields": ["Year", "Life expectancy"]
			},
			"as": ["year", "life_expectancy"]
		},
		{
			"filter": "datum.year == param_year"
		}
	],
	"mark": {"type": "geoshape"},
	"encoding": {
		"color": {
			"field": "life_expectancy",
		  	"type": "quantitative",
		  	"scale": {"type": "linear"},
			"title": "Life Expectancy (Years)"
		},
		"tooltip": [
			{"field": "properties.NAME", "type": "nominal", "title": "Country"},
      		{"field": "life_expectancy", "type": "quantitative", "title": "Life Expectancy"},
			{"field": ""}
		]
	}
}